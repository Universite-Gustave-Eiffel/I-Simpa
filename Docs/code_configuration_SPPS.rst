SPPS calculation code
~~~~~~~~~~~~~~~~~~~~~~~~~~

SPPS is already embedded in I-Simpa. Follow the next instructions to run a calculation with the SPPS code in I-Simpa.

**Double left click** on the TCR calculation code in I-Simpa to display all calculation paramaters:

- `Frequency bands`_ for the selection of the frequency band to be used for the calculation

- `Meshing`_ for the meshing configuration

- `SPPS Calculation parameters`_


**Right click** on the selected calculation code to display all possible actions:

- Run calculation

- Job list


.. include:: code_configuration_frequency_bands.rst

.. include:: code_configuration_meshing.rst

SPPS Calculation parameters
^^^^^^^^^^^^^^^^^^^^^^^^^^^

- 'Active calculation of atmospheric absorption'
	Enables calculation of atmospheric absorption.

- 'Active calculation of diffusion by fitting objects'
	Enables calculation of calculation of diffusion by fitting objects.

	.. important::

		If fitting zones are enabled, by checking this option, it disables the calculation of all fitting zones. If you uncheck this option, the individual configuration of each fitting zone is preserved.

- 'Active calculation of direct field only'
	Enables calculation of direct field only. There is no calculation of the reverberant field.

	.. tip::

		This can be useful if you want to realize a first calculation, as a reference, of the direct field at receivers. The second calculation (direct and reverberant fields) can thus be calculated and compared to the direct field (first calculation).

- 'Active calculation transmission'
	Enables calculation of transmission through walls.

- 'Calculation method'
	Selects the calculation method.

		+ 'Random'
			Select the Random method.

		+ 'Energetic'
			Select the Energetic method.

- 'Echogram per source'
	Check to calculation an echogram for each sound source, for a given receiver. If uncheck, a global echogram is calculated by summing all source contributions.

- 'Export surface receivers for each frequency band'
	Check to export the surface receiver results, for each frequency band. If uncheck, only the global value is exported.

- 'Limit value of the particle extinction: ratio 10^n'
	For the 'Energetic' mode only. It defines a limit value of the particle energy. If the decrease of the particle energy is less than this value (*i.e.* the particle energy is very low), the particle is removed from the domain. For example, if n=60, it means that all particles whose energy will decreases to 60dB, will be removed.

- 'Number of sound particles per source'
	Defines the number of sound particles that are generated by the source.

	.. warning::

		The computational time depends on the number of particles. If you increase the total number of particles, you drastically increase the computaional time.

- 'Number of sound particles per source (display)'
	Defines the number of particles that are used for the particle animation.

	.. note::

		Most of time, you need to consider only few hundreds or thousands particles for the animation. Incerasing this number, will decrease the memory resources.

- 'Random seed'
	Initialize the random number series. If you select '0', the random series will always be the same.

	.. tip::

		Select '0' if you want to repeat exactly the same computation.

- 'Receiver radius (m)'
	Defines the receiver radius (in m).

- 'Simulation length (s)'
	Defines the duration (in s) of the simulation.

- 'Surface receiver export'
	Select the kind of results that is exported.

		+ 'Soundmap: intensity'
			Intensity level (in dB).

		+ 'Soundmap: SPL'
			Sound pressure level (in dB).

- 'Time step (s)'
	Time step (in s) for the calculation.
